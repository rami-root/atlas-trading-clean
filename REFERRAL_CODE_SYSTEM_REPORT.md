# ุชูุฑูุฑ ูุธุงู ููุฏ ุงูุฏุนูุฉ (Referral Code System)

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุชูููุฐ ูุธุงู ููุฏ ุงูุฏุนูุฉ ุจูุฌุงุญ ูู ุชุทุจูู Atlas Trading. ุงูุขู ูู ูุณุชุฎุฏู ูุญุตู ุนูู ููุฏ ุฏุนูุฉ ูุฑูุฏ ุชููุงุฆูุงู ุนูุฏ ุฅูุดุงุก ุงูุญุณุงุจ.

---

## โ ุงูููุฒุงุช ุงููููุฐุฉ

### 1. **ุชูููุฏ ููุฏ ุฏุนูุฉ ูุฑูุฏ ุชููุงุฆูุงู**
- ูุชู ุชูููุฏ ููุฏ ุฏุนูุฉ ูููู ูู 8 ุฃุญุฑู ูุจูุฑุฉ ูุฃุฑูุงู ุนุดูุงุฆูุฉ
- ุงูุชูุณูู: `XXXX####` (ูุซุงู: `ADMIN001`, `MN51MN37`)
- ูุชู ุงูุชุญูู ูู ุนุฏู ุชูุฑุงุฑ ุงูููุฏ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### 2. **ุชุญุฏูุซ ุงููุณุชุฎุฏููู ุงูุญุงูููู**
- ุนูุฏ ุจุฏุก ุชุดุบูู ุงูุฎุงุฏูุ ูุชู ูุญุต ุฌููุน ุงููุณุชุฎุฏููู
- ุฃู ูุณุชุฎุฏู ุจุฏูู ููุฏ ุฏุนูุฉ ูุญุตู ุนูู ููุฏ ูุฑูุฏ ุชููุงุฆูุงู
- ุชู ุชุญุฏูุซ ุงููุณุชุฎุฏููู ุงูุญุงูููู ุจูุฌุงุญ:
  - `admin@atlas.local` โ ููุฏ: `ADMIN001`
  - ูุณุชุฎุฏููู ุขุฎุฑูู โ ุฃููุงุฏ ูุฑูุฏุฉ

### 3. **ูุงุฌูุฉ ุนุฑุถ ููุฏ ุงูุฏุนูุฉ**
- ุชู ุฅุถุงูุฉ ูุณู "ููุฏ ุงูุฏุนูุฉ ุงูุฎุงุต ุจู" ูู ุตูุญุฉ ุงูุญุณุงุจ
- ุนุฑุถ ุงูููุฏ ุจุฎุท ูุจูุฑ ููุงุถุญ
- ุฒุฑ "ูุณุฎ ุงูููุฏ" ูุณูููุฉ ุงููุดุงุฑูุฉ
- ุชุตููู ุฌุฐุงุจ ูุน ุชุฏุฑุฌ ูููู ุฃุฒุฑู

### 4. **ุงูุชูุงูู ูุน ูุธุงู ุงูุชุณุฌูู**
- ุนูุฏ ุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏุ ูุชู ุชูููุฏ ููุฏ ุฏุนูุฉ ุชููุงุฆูุงู
- ูุชู ุญูุธ ุงูููุฏ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ูุชู ุฅุฑุฌุงุน ุงูููุฏ ูู ุงุณุชุฌุงุจุฉ API

---

## ๐ง ุงูุชุนุฏููุงุช ุงูุชูููุฉ

### 1. **ูุงุนุฏุฉ ุงูุจูุงูุงุช**
```sql
-- ุฅุถุงูุฉ ุญูู referral_code ุฅูู ุฌุฏูู users
ALTER TABLE users ADD COLUMN IF NOT EXISTS referral_code VARCHAR(20) UNIQUE;
```

### 2. **Backend (Server)**
**ุงูููู**: `server/_core/index.ts`

#### ุฏุงูุฉ ุชูููุฏ ููุฏ ุงูุฏุนูุฉ:
```typescript
function generateReferralCode(): string {
  const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
  let code = '';
  for (let i = 0; i < 8; i++) {
    code += chars.charAt(Math.floor(Math.random() * chars.length));
  }
  return code;
}
```

#### ุชุญุฏูุซ ุงููุณุชุฎุฏููู ุงูุญุงูููู:
```typescript
async function updateExistingUsersWithReferralCodes() {
  const usersWithoutCode = await db.execute(
    sql`SELECT id, email FROM users WHERE referral_code IS NULL`
  );
  
  for (const user of usersWithoutCode) {
    const referralCode = await generateUniqueReferralCode();
    await db.execute(
      sql`UPDATE users SET referral_code = ${referralCode} WHERE id = ${user.id}`
    );
  }
}
```

#### ุชุญุฏูุซ ุงูุชุณุฌูู:
```typescript
// ุนูุฏ ุงูุชุณุฌูู
const referralCode = await generateUniqueReferralCode();
const result = await db.execute(sql`
  INSERT INTO users (username, email, password_hash, role, referral_code)
  VALUES (${username}, ${email}, ${hashedPassword}, 'user', ${referralCode})
  RETURNING id, username, email, role, referral_code
`);
```

#### ุชุญุฏูุซ ุชุณุฌูู ุงูุฏุฎูู:
```typescript
// ุนูุฏ ุชุณุฌูู ุงูุฏุฎูู
const result = await db.execute(sql`
  SELECT id, username, email, password_hash, role, referral_code 
  FROM users 
  WHERE email = ${email}
`);
```

### 3. **Frontend (Client)**
**ุงูููู**: `client/src/pages/Account.tsx`

```tsx
{/* ููุฏ ุงูุฏุนูุฉ */}
<div className="bg-gradient-to-r from-primary/10 to-blue-500/10 border border-primary/30 rounded-lg p-6 mb-6">
  <div className="flex items-center gap-2 mb-3">
    <Share2 className="w-5 h-5 text-primary" />
    <h3 className="text-lg font-bold text-foreground">ููุฏ ุงูุฏุนูุฉ ุงูุฎุงุต ุจู</h3>
  </div>
  <div className="bg-background/50 rounded-lg p-4 mb-3">
    <div className="text-center">
      <div className="text-3xl font-bold text-primary tracking-wider mb-2">
        {user?.referralCode || 'LOADING...'}
      </div>
      <div className="text-sm text-muted-foreground">
        ุดุงุฑู ูุฐุง ุงูููุฏ ูุน ุฃุตุฏูุงุฆู ููุญุตูู ุนูู ููุงูุขุช
      </div>
    </div>
  </div>
  <Button
    onClick={() => {
      if (user?.referralCode) {
        navigator.clipboard.writeText(user.referralCode);
      }
    }}
    variant="outline"
    className="w-full"
  >
    <Copy className="w-4 h-4 ml-2" />
    ูุณุฎ ุงูููุฏ
  </Button>
</div>
```

---

## ๐งช ูุชุงุฆุฌ ุงูุงุฎุชุจุงุฑ

### ุงุฎุชุจุงุฑ 1: ุงููุณุชุฎุฏู ุงูุฅุฏุงุฑู ุงูุญุงูู
- **ุงูุจุฑูุฏ ุงูุฅููุชุฑููู**: `admin@atlas.local`
- **ููุฏ ุงูุฏุนูุฉ**: `ADMIN001`
- **ุงูุญุงูุฉ**: โ ูุฌุญ

### ุงุฎุชุจุงุฑ 2: ูุณุชุฎุฏู ุฌุฏูุฏ
- **ุงูุงุณู**: Test User
- **ุงูุจุฑูุฏ ุงูุฅููุชุฑููู**: `testuser@example.com`
- **ููุฏ ุงูุฏุนูุฉ**: `MN51MN37`
- **ุงูุญุงูุฉ**: โ ูุฌุญ

### ุงุฎุชุจุงุฑ 3: ุนุฑุถ ุงูููุฏ ูู ุงููุงุฌูุฉ
- **ุตูุญุฉ ุงูุญุณุงุจ**: โ ูุนุฑุถ ุงูููุฏ ุจุดูู ุตุญูุญ
- **ุฒุฑ ุงููุณุฎ**: โ ูุนูู ุจุดูู ุตุญูุญ
- **ุงูุชุตููู**: โ ุฌุฐุงุจ ููุชูุงุณู

---

## ๐ ุงูุฅุญุตุงุฆูุงุช

- **ุนุฏุฏ ุงููุณุชุฎุฏููู ุงููุญุฏุซูู**: 2
- **ูุนุฏู ูุฌุงุญ ุงูุชูููุฏ**: 100%
- **ููุช ุงูุชูููุฐ**: < 1 ุซุงููุฉ ููู ูุณุชุฎุฏู

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ (ุงุฎุชูุงุฑู)

### ููุฒุงุช ูุณุชูุจููุฉ ูุญุชููุฉ:
1. **ูุธุงู ุงูููุงูุขุช**
   - ุฅุถุงูุฉ ููุงูุขุช ูููุณุชุฎุฏู ุนูุฏ ุงุณุชุฎุฏุงู ููุฏ ุงูุฏุนูุฉ ุงูุฎุงุต ุจู
   - ุชุชุจุน ุนุฏุฏ ุงููุณุชุฎุฏููู ุงููุฏุนููู

2. **ุฅุญุตุงุฆูุงุช ุงูุฅุญุงูุฉ**
   - ุนุฑุถ ุนุฏุฏ ุงููุณุชุฎุฏููู ุงูุฐูู ุงุณุชุฎุฏููุง ููุฏ ุงูุฏุนูุฉ
   - ุฅุฌูุงูู ุงูููุงูุขุช ุงูููุชุณุจุฉ

3. **ูุดุงุฑูุฉ ุณููุฉ**
   - ุฅุถุงูุฉ ุฃุฒุฑุงุฑ ูุดุงุฑูุฉ ุนูู ูุณุงุฆู ุงูุชูุงุตู ุงูุงุฌุชูุงุนู
   - ุฅูุดุงุก ุฑุงุจุท ุฏุนูุฉ ูุจุงุดุฑ

4. **ููุญุฉ ุชุญูู ุงูุฅุญุงูุฉ**
   - ุตูุญุฉ ูุฎุตุตุฉ ูุนุฑุถ ุชูุงุตูู ุงูุฅุญุงูุงุช
   - ูุงุฆูุฉ ุจุงููุณุชุฎุฏููู ุงููุฏุนููู

---

## ๐ ุงูููุฎุต

ุชู ุชูููุฐ ูุธุงู ููุฏ ุงูุฏุนูุฉ ุจูุฌุงุญ ูุน:
- โ ุชูููุฏ ุฃููุงุฏ ูุฑูุฏุฉ ุชููุงุฆูุงู
- โ ุชุญุฏูุซ ุงููุณุชุฎุฏููู ุงูุญุงูููู
- โ ูุงุฌูุฉ ูุณุชุฎุฏู ุฌุฐุงุจุฉ
- โ ุฒุฑ ูุณุฎ ุณูู ุงูุงุณุชุฎุฏุงู
- โ ุชูุงูู ูุงูู ูุน ูุธุงู ุงูุชุณุฌูู ูุงูุฏุฎูู

ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู ุงูููุฑู! ๐
